webpackJsonp([12],{CbPG:function(e,t){},Tp7Y:function(e,t){},u9EU:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("mvHQ"),r=n.n(i),s=n("CaOM"),a={data:function(){return{wrapper:!1,shunXu:"",deleteId:[],input:"",select:"",userList:[],imgList:[],bannerConfig:{displayOrder:"",displayInterval:3e3},pic:[],doDate:[],n:0,index:1,lengthBiao:"",fileIndex:1}},methods:{fileChange:function(e){e.target.files[0].size&&(this.fileList(e.target),e.target.value="")},fileList:function(e){for(var t=e.files,n=0;n<t.length;n++)""!=t[n].type?this.fileAdd(t[n]):this.folders(e.items[n])},folders:function(e){var t=this;e.kind&&(e=e.webkitGetAsEntry()),e.createReader().readEntries(function(e){for(var n=0;n<e.length;n++)e[n].isFile?t.foldersAdd(e[n]):t.folders(e[n])})},foldersAdd:function(e){var t=this;e.file(function(e){t.fileAdd(e)})},fileAdd:function(e){if(-1==e.type.indexOf("image"))e.src="wenjian.png",this.imgList.push({file:e});else{var t=new FileReader,n=new Image,i=this;t.readAsDataURL(e),t.onload=function(){e.src=this.result,n.onload=function(){var t=n.width,r=n.height;e.width=t,e.height=r,i.imgList.push({file:e}),i.userList.push({bannerUrl:e.src,orders:i.userList.length+1,fileOrder:i.index}),i.index++},n.src=e.src}}},updateFile:function(){var e=this;this.userList.forEach(function(t,n,i){i[n].orders=n+1,i[n].fileOrder&&(i[n].fileOrder=e.fileIndex,e.fileIndex++)});var t=new FormData,n=r()(this.userList);t.append("moveJson",n);var i=r()(this.deleteId);t.append("deleteJson",i);for(var s=0;s<this.imgList.length;s++)t.append("pics",this.imgList[s].file);var a=this;this.axios.post(this.ApiConfig.bannerConfig.updateBanner,t,{headers:{"Content-Type":"multipart/form-data;charset=UTF-8",Authorization:sessionStorage.getItem("tokenId")}}).then(function(e){if(200!=e.data.code)return a.$notify({title:"提示",message:e.data.message,type:"warning"}),!1;a.$notify({title:"提示",message:"改变成功",type:"success"})}).catch(function(e){console.log(e)})},queryBanners:function(){var e=this;Object(s.a)(this,this.ApiConfig.bannerConfig.queryBanners,{},function(t){if(200!=t.code)return e.$notify({title:"提示",message:t.message,type:"warning"}),!1;e.userList=t.data.bannerTables,e.lengthBiao=e.userList.length;var n=[],i=e.userList;i.forEach(function(e,t,i){n.push(i[t].orders)});for(var r=0;r<i.length;r++)for(var s=0;s<i.length-r;s++)if(n[s]>n[s+1]){var a=n[s],l=i[s];n[s]=n[s+1],i[s]=i[s+1],n[s+1]=a,i[s+1]=l}e.bannerConfig.displayOrder=t.data.bannerConfig.displayOrder,1==e.bannerConfig.displayOrder?e.bannerConfig.displayOrder="从右往左":0==e.bannerConfig.displayOrder&&(e.bannerConfig.displayOrder="从左往右"),e.bannerConfig.displayInterval=t.data.bannerConfig.displayInterval},"POST")},basicBannerConfig:function(){var e=this;this.wrapper=!0,"从右往左"==this.bannerConfig.displayOrder?this.bannerConfig.displayOrder=1:"从左往右"==this.bannerConfig.displayOrder&&(this.bannerConfig.displayOrder=0),Object(s.a)(this,this.ApiConfig.bannerConfig.basicBannerConfig,this.bannerConfig,function(t){if(200!=t.code)return e.$notify({title:"提示",message:t.message,type:"warning"}),!1},"POST")},prev:function(e,t){if(this.bool=!1,0==e)return this.$notify({title:"提示",message:"已经是第一个了",type:"warning"}),!1;var n=this.userList[e-1];this.userList[e-1]=this.userList[e],this.userList[e]=n,this.userList.push(""),this.userList.pop("")},next:function(e,t){if(this.bool=!1,e==this.userList.length-1)return this.$notify({title:"提示",message:"已经是最后一个了",type:"warning"}),!1;var n=this.userList[e+1];this.userList[e+1]=t,this.userList[e]=n,this.userList.push(""),this.userList.pop("")},deleteRow:function(e,t,n){if(!t.id)return this.imgList.splice(t.fileOrder-1,1),void n.splice(e,1);this.deleteId.push(t.id),n.splice(e,1)}},mounted:function(){this.queryBanners()}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{attrs:{id:"banner"}},[n("span",{staticClass:"title"},[e._v(e._s(e.$t("banner.banner")))]),e._v(" "),n("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[n("el-form",{attrs:{inline:!0,model:e.bannerConfig}},[n("el-form-item",{attrs:{label:e.$t("playSort")}},[n("el-select",{attrs:{placeholder:e.$t("All")},model:{value:e.bannerConfig.displayOrder,callback:function(t){e.$set(e.bannerConfig,"displayOrder",t)},expression:"bannerConfig.displayOrder"}},[n("el-option",{attrs:{label:e.$t("leftToRight"),value:"0"}}),e._v(" "),n("el-option",{attrs:{label:e.$t("rightToLeft"),value:"1"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("playTime")}},[n("el-input",{attrs:{placeholder:e.$t("ptimer")},model:{value:e.bannerConfig.displayInterval,callback:function(t){e.$set(e.bannerConfig,"displayInterval",t)},expression:"bannerConfig.displayInterval"}})],1),e._v(" "),n("el-form-item",[n("el-button",{staticClass:"warning",on:{click:e.basicBannerConfig}},[e._v(e._s(e.$t("previewFunction")))])],1),e._v(" "),n("el-form-item",[n("el-button",{staticClass:"warning box"},[e._v(e._s(e.$t("newPictures"))+"\n           "),n("input",{attrs:{type:"file",multiple:"",id:"file"},on:{change:function(t){e.fileChange(t)}}}),e._v(" "),n("label",{attrs:{for:"file"}})])],1)],1)],1),e._v(" "),n("el-table",{staticStyle:{width:"aotu"},attrs:{data:e.userList}},[n("el-table-column",{attrs:{prop:"orders",label:e.$t("banner.thead[0]")}}),e._v(" "),n("el-table-column",{attrs:{prop:"bannerUrl",label:e.$t("banner.thead[1]")},scopedSlots:e._u([{key:"default",fn:function(e){return[n("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.row.bannerUrl,alt:""}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:e.$t("service.thead[2]")},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){e.prev(t.$index,t.row)}}},[e._v(e._s(e.$t("banner.do[0]")))]),e._v(" "),n("el-button",{attrs:{size:"mini"},on:{click:function(n){e.next(t.$index,t.row)}}},[e._v(e._s(e.$t("banner.do[1]")))]),e._v(" "),n("el-button",{attrs:{size:"mini"},nativeOn:{click:function(n){n.preventDefault(),e.deleteRow(t.$index,t.row,e.userList)}}},[e._v(e._s(e.$t("banner.do[2]")))])]}}])})],1),e._v(" "),n("el-button",{attrs:{type:"info"},on:{"~click":function(t){return e.updateFile(t)}}},[e._v(e._s(e.$t("sureChange"))+"banner")]),e._v(" "),n("el-dialog",{attrs:{visible:e.wrapper},on:{"update:visible":function(t){e.wrapper=t}}},[[n("el-carousel",{attrs:{"indicator-position":"outside",interval:e.bannerConfig.displayInterval}},e._l(e.userList,function(e){return n("el-carousel-item",{key:e.orders},[n("img",{attrs:{src:e.bannerUrl,alt:""}})])}))]],2)],1)},staticRenderFns:[]};var o=n("VU/8")(a,l,!1,function(e){n("CbPG"),n("Tp7Y")},"data-v-03836ca4",null);t.default=o.exports}});
//# sourceMappingURL=12.e720acbfcc213b633156.js.map