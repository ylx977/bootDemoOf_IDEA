webpackJsonp([9],{"2hqZ":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=o("CaOM"),a={data:function(){return{allotData2:[],checkList:[],createRo:"",allotShow:!1,allotData:"",fixRole:!1,fixRoleForm:{oldRole:"",newRole:""},updateRoleData:{roleId:"",roleName:""},roleId:"",fix:!1,newAdd:!1,userForm:{},userLoading:!1,roleList:[],roleDate:{page:1,rowNum:"10",startTime:"",endTime:""},total:0}},methods:{queryRoles:function(){var t=this;Object(l.a)(this,this.ApiConfig.userManagement.role.queryRoles,this.roleDate,function(e){console.log(e),t.roleList=e.data.rows,t.total=e.data.total,t.roleList.forEach(function(t,e,o){o[e].ctime=Object(l.d)("Y-M-D h:m:s",o[e].ctime),o[e].utime=Object(l.d)("Y-M-D h:m:s",o[e].utime)}),t.userLoading=!1},"POST")},createRole:function(){var t=this,e={roleName:this.createRo};Object(l.a)(this,this.ApiConfig.userManagement.role.createRole,e,function(e){console.log(e),t.newAdd=!1,t.queryRoles(),t.createRo=""},"POST")},open2:function(t,e){var o=this;this.$confirm("此操作将永久删除该角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.deleteRoles(t,e),o.$message({type:"success",message:"删除成功!"})}).catch(function(){o.$message({type:"info",message:"已取消删除"})})},deleteRoles:function(t,e){var o=this;console.log(e);var a=[];a.push(e.authgroupId);var s={roleIds:a};Object(l.a)(this,this.ApiConfig.userManagement.role.deleteRoles,s,function(t){console.log(t),o.queryRoles()},"POST")},fixDate:function(t,e){this.fixRole=!0,console.log(e),this.fixRoleForm.oldRole=e.authgroupName,this.updateRoleData.roleId=e.authgroupId},updateRole:function(){var t=this;this.updateRoleData.roleName=this.fixRoleForm.newRole,Object(l.a)(this,this.ApiConfig.userManagement.role.updateRole,this.updateRoleData,function(e){console.log(e),t.fixRole=!1,t.queryRoles()},"POST")},showAuthoritiesUnderRole:function(t,e){var o=this;this.allotData2=[];var a={roleId:e.authgroupId};this.roleId=e.authgroupId,Object(l.a)(this,this.ApiConfig.userManagement.role.showAuthoritiesUnderRole,a,function(t){console.log(t),o.allotData=t.data,o.allotShow=!0,console.log(o.allotData);for(var e=0;e<o.allotData.length;e++)1==o.allotData[e].isSelected&&o.allotData2.push(o.allotData[e].authId)},"POST")},changeFun:function(t){0==t.isSelected?t.isSelected=1:t.isSelected=0,console.log(t),this.allotData[t.authId-1]=t},assignAuthorities4Role:function(){var t=this;this.checkList=[],console.log(this.checkList+"这是前面的checkList");for(var e=0;e<this.allotData.length;e++)1==this.allotData[e].isSelected&&this.checkList.push(this.allotData[e].authId);console.log(this.checkList+"这是checkList");var o={roleId:this.roleId,authIds:this.checkList};console.log(o.roleId),Object(l.a)(this,this.ApiConfig.userManagement.role.assignAuthorities4Role,o,function(e){console.log(e),t.allotShow=!1},"POST")},getUsers:function(){},handleReset:function(){},tableRowClassName:function(t){t.row;if(t.rowIndex%2==1)return"success-row"},handleCurrentChange:function(t){this.roleDate.page=t,this.queryRoles()}},mounted:function(){this.queryRoles()}},s={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{attrs:{id:"roleSetting"}},[o("span",{staticClass:"title"},[t._v(t._s(t.$t("role.role")))]),t._v(" "),o("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[o("el-form",{attrs:{inline:!0,model:t.userForm}},[o("el-form-item",[o("el-button",{staticClass:"warning newAdd",on:{click:function(e){t.newAdd=!0}}},[t._v(t._s(t.$t("role.do")))])],1)],1)],1),t._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.userLoading,expression:"userLoading"}],staticStyle:{width:"100%"},attrs:{data:t.roleList,"row-class-name":t.tableRowClassName}},[o("el-table-column",{attrs:{prop:"authgroupName",label:t.$t("role.thead[0]")}}),t._v(" "),o("el-table-column",{attrs:{prop:"ctime",label:t.$t("role.thead[1]")}}),t._v(" "),o("el-table-column",{attrs:{prop:"utime",label:t.$t("role.thead[2]")}}),t._v(" "),o("el-table-column",{attrs:{label:t.$t("role.thead[3]")},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"mini"},on:{click:function(o){t.showAuthoritiesUnderRole(e.$index,e.row)}}},[t._v(t._s(t.$t("allot")))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:t.$t("role.thead[4]")},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"mini"},on:{click:function(o){t.fixDate(e.$index,e.row)}}},[t._v(t._s(t.$t("xiuGai")))]),t._v(" "),o("el-button",{attrs:{type:"text"},on:{click:function(o){t.open2(e.$index,e.row)}}},[t._v(t._s(t.$t("delete")))])]}}])})],1),t._v(" "),o("el-dialog",{attrs:{title:t.$t("RoleChange"),visible:t.fixRole,id:"fixRoledd"},on:{"update:visible":function(e){t.fixRole=e}}},[o("el-form",{attrs:{model:t.fixRoleForm}},[o("el-form-item",{attrs:{label:t.$t("oldRole")}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.fixRoleForm.oldRole,callback:function(e){t.$set(t.fixRoleForm,"oldRole",e)},expression:"fixRoleForm.oldRole"}})],1),t._v(" "),o("el-form-item",{attrs:{label:t.$t("newRole")}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.fixRoleForm.newRole,callback:function(e){t.$set(t.fixRoleForm,"newRole",e)},expression:"fixRoleForm.newRole"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{staticClass:"exit",on:{click:function(e){t.fixRole=!1}}},[t._v(t._s(t.$t("cancel")))]),t._v(" "),o("el-button",{staticClass:"sureSure",attrs:{type:"primary"},on:{click:t.updateRole}},[t._v(t._s(t.$t("confirm")))])],1)],1),t._v(" "),o("el-dialog",{attrs:{title:"分配权限",visible:t.allotShow,id:"allotPower"},on:{"update:visible":function(e){t.allotShow=e}}},[o("el-checkbox-group",{model:{value:t.allotData2,callback:function(e){t.allotData2=e},expression:"allotData2"}},[t._l(t.allotData,function(e,l){return[o("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:l>13&&23!=l&&45!=l,expression:"index>13 && index !=23 && index != 45"}],key:l,attrs:{label:e.authId},on:{change:function(o){t.changeFun(e)}}},[t._v(t._s(e.authName))])]})],2),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{staticClass:"exit",on:{click:function(e){t.allotShow=!1}}},[t._v(t._s(t.$t("cancel")))]),t._v(" "),o("el-button",{staticClass:"sureSure",attrs:{type:"primary"},on:{click:t.assignAuthorities4Role}},[t._v(t._s(t.$t("confirm")))])],1)],1),t._v(" "),o("el-dialog",{attrs:{title:t.$t("newAdd"),visible:t.newAdd,id:"newRoleDig"},on:{"update:visible":function(e){t.newAdd=e}}},[o("p",[t._v(t._s(t.$t("NewRoleName"))),o("input",{directives:[{name:"model",rawName:"v-model",value:t.createRo,expression:"createRo"}],staticClass:"search",attrs:{type:"text"},domProps:{value:t.createRo},on:{input:function(e){e.target.composing||(t.createRo=e.target.value)}}})]),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{staticClass:"exit",on:{click:function(e){t.newAdd=!1}}},[t._v(t._s(t.$t("cancel")))]),t._v(" "),o("el-button",{staticClass:"sureSure",attrs:{type:"primary"},on:{click:t.createRole}},[t._v(t._s(t.$t("confirm")))])],1)]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.total>10,expression:"total >10"}],staticClass:"page"},[o("el-col",{staticClass:"toolbar  ",attrs:{span:24}},[o("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)],1)},staticRenderFns:[]};var i=o("VU/8")(a,s,!1,function(t){o("DSoh"),o("xKZU")},"data-v-67092bb3",null);e.default=i.exports},DSoh:function(t,e){},xKZU:function(t,e){}});
//# sourceMappingURL=9.8b73ffad0566204f0792.js.map