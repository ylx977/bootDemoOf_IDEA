webpackJsonp([6],{"2ma1":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("CaOM"),r={data:function(){return{userList:[],page:1,userTotal:0,formFix:{uid:"",phoneNumber:"",email:""},ruleFix:{phoneNumber:[{validator:function(e,t,s){/(^1[3|4|5|7|8]\d{9}$)|(^09\d{8}$)/.test(t)||""==t?s():s(new Error("请输入正确的手机号"))},trigger:"change"}],email:[{validator:function(e,t,s){/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(t)||""==t||null==t?s():s(new Error("邮箱格式有误"))},trigger:"change"}]},userForm:{startTime:"",endTime:"",page:1,rowNum:"20"},startT:"",endT:"",input:"",select:"",userLoading:!1,dialogFormVisible:!1,fixDialog:{uid:"",username:""}}},methods:{getUsers:function(){var e=this;if(""!=this.select&&(this.userForm[this.select]=this.input),""!=this.userForm.startTime){var t=Object(i.b)(this.userForm.startTime);this.startT=Object(i.c)(t)}if(""!=this.userForm.endTime){var s=Object(i.b)(this.userForm.endTime);this.endT=Object(i.c)(s)}this.userLoading=!0;var r={page:this.userForm.page,rowNum:this.userForm.rowNum,uid:"",phoneNumber:"",username:"",email:"",startTime:this.startT,endTime:this.endT};"uid"==this.select?r.uid=this.input:"phoneNumber"==this.select?r.phoneNumber=this.input:"username"==this.select?r.username=this.input:"email"==this.select&&(r.email=this.input),Object(i.a)(this,this.ApiConfig.userManagement.queryFrontUserInfo,r,function(t){if(200!=t.code)return e.userLoading=!1,e.$notify({title:"提示",message:t.message,type:"warning"}),!1;e.userList=t.data.rows,e.userTotal=t.data.total,e.userList.forEach(function(t,s,r){e.userList[s].ctime=Object(i.d)("Y-M-D h:m:s",r[s].ctime),e.userList[s].utime=Object(i.d)("Y-M-D h:m:s",r[s].utime),1==e.userList[s].cardType?e.userList[s].cardType="中国身份证":2==e.userList[s].cardType&&(e.userList[s].cardType="外国证件")}),e.startT="",e.endT="",e.userLoading=!1},"POST",this.$store.state.lang)},pointFix:function(e,t){this.dialogFormVisible=!0,this.formFix.phoneNumber=t.phoneNumber,this.formFix.email=t.emailAddress},closeFIX:function(){this.formFix.phoneNumber="",this.formFix.email="",this.dialogFormVisible=!1},updataUser:function(){var e=this;if(!(""!=this.formFix.phoneNumber&&null!=this.formFix.phoneNumber||""!=this.formFix.email&&null!=this.formFix.email))return this.$notify({title:"提示",message:"邮箱和电话号码不能都为空",type:"warning"}),!1;this.formFix.uid=this.fixDialog.uid,this.$refs.formFix.validate(function(t){if(!t)return!1;Object(i.a)(e,e.ApiConfig.userManagement.updateFrontUserInfo,e.formFix,function(t){e.$notify({title:"提示",message:t.message,type:"warning"}),e.dialogFormVisible=!1,e.getUsers()},"POST")})},handleCurrentChange:function(e){this.userForm.page=e,this.getUsers()},handleReset:function(e){this.$refs[e].resetFields(),this.userForm.startTime="",this.userForm.endTime="",this.userForm.page="1",this.userForm.rowNum=20,this.select="",this.input="",this.getUsers()},tableRowClassName:function(e){e.row;if(e.rowIndex%2==1)return"success-row"},getUserInfo:function(e,t,s){this.fixDialog.uid=e.uid,this.fixDialog.username=e.realName}},mounted:function(){this.getUsers()}},a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{attrs:{id:"userList"}},[s("span",{staticClass:"title"},[e._v(e._s(e.$t("userList.user")))]),e._v(" "),s("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[s("el-form",{ref:"userForm",attrs:{inline:!0,model:e.userForm}},[s("el-form-item",{attrs:{label:e.$t("userList.register[0]")}},[s("el-date-picker",{attrs:{type:"date",placeholder:e.$t("userList.register[1]")},model:{value:e.userForm.startTime,callback:function(t){e.$set(e.userForm,"startTime",t)},expression:"userForm.startTime"}})],1),e._v(" "),s("el-form-item",{attrs:{label:e.$t("userList.register[2]")}},[s("el-date-picker",{attrs:{type:"date",placeholder:e.$t("userList.register[3]")},model:{value:e.userForm.endTime,callback:function(t){e.$set(e.userForm,"endTime",t)},expression:"userForm.endTime"}})],1),e._v(" "),s("el-form-item",[s("el-input",{staticClass:"input-with-select",attrs:{placeholder:e.$t("pleaseEnter")},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}},[s("el-select",{attrs:{slot:"prepend",placeholder:e.$t("Pchoose")},slot:"prepend",model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},[s("el-option",{attrs:{label:"UID",value:"uid"}}),e._v(" "),s("el-option",{attrs:{label:e.$t("phone"),value:"phoneNumber"}}),e._v(" "),s("el-option",{attrs:{label:e.$t("email"),value:"email"}})],1)],1)],1),e._v(" "),s("el-form-item",[s("el-button",{staticClass:"warning",on:{click:e.getUsers}},[e._v(e._s(e.$t("userList.register[5]")))])],1),e._v(" "),s("el-form-item",[s("el-button",{staticClass:"info",on:{click:function(t){e.handleReset("userForm")}}},[e._v(e._s(e.$t("userList.register[6]")))])],1)],1)],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.userLoading,expression:"userLoading"}],staticStyle:{width:"100%"},attrs:{data:e.userList,"row-class-name":e.tableRowClassName},on:{"row-click":e.getUserInfo}},[s("el-table-column",{attrs:{prop:"uid",label:e.$t("userList.tableHead[0]"),width:"175"}}),e._v(" "),s("el-table-column",{attrs:{prop:"realName",label:e.$t("userList.tableHead[1]")}}),e._v(" "),s("el-table-column",{attrs:{prop:"cardType",label:e.$t("userList.tableHead[2]")}}),e._v(" "),s("el-table-column",{attrs:{prop:"cardNumber",label:e.$t("userList.tableHead[3]"),width:"170"}}),e._v(" "),s("el-table-column",{attrs:{prop:"phoneNumber",label:e.$t("userList.tableHead[4]")}}),e._v(" "),s("el-table-column",{attrs:{prop:"emailAddress",label:e.$t("userList.tableHead[5]"),width:"200"}}),e._v(" "),s("el-table-column",{attrs:{prop:"ctime",label:e.$t("userList.tableHead[6]"),width:"160"}}),e._v(" "),s("el-table-column",{attrs:{label:e.$t("userList.tableHead[7]")},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){e.pointFix(t.$index,t.row)}}},[e._v(e._s(e.$t("xiuGai")))])]}}])})],1),e._v(" "),s("el-dialog",{attrs:{title:e.$t("fix"),visible:e.dialogFormVisible,width:"550px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",{ref:"formFix",attrs:{"label-position":"left",model:e.formFix,rules:e.ruleFix}},[s("el-form-item",[s("el-row",[s("el-col",{attrs:{span:12}},[s("p",{staticClass:"message"},[e._v(e._s(e.$t("userName"))+": "),s("span",[e._v(e._s(e.fixDialog.username))])])]),e._v(" "),s("el-col",{attrs:{span:12}},[s("p",{staticClass:"message"},[e._v(" UID: "),s("span",[e._v(e._s(e.fixDialog.uid))])])])],1)],1),e._v(" "),s("el-form-item",{attrs:{label:e.$t("phone"),prop:"phoneNumber"}},[s("el-input",{attrs:{placeholder:e.$t("Pphone")},model:{value:e.formFix.phoneNumber,callback:function(t){e.$set(e.formFix,"phoneNumber",t)},expression:"formFix.phoneNumber"}})],1),e._v(" "),s("el-form-item",{attrs:{label:e.$t("email"),prop:"email"}},[s("el-input",{attrs:{placeholder:e.$t("email")},model:{value:e.formFix.email,callback:function(t){e.$set(e.formFix,"email",t)},expression:"formFix.email"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"exit",on:{click:e.closeFIX}},[e._v(e._s(e.$t("cancel")))]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.updataUser}},[e._v(e._s(e.$t("confirm")))])],1)],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.userTotal>20,expression:"userTotal>20"}],staticClass:"page"},[s("el-col",{staticClass:"toolbar",attrs:{span:24}},[s("el-pagination",{attrs:{background:"","page-size":20,layout:"prev, pager, next",total:e.userTotal},on:{"current-change":e.handleCurrentChange}})],1)],1)],1)},staticRenderFns:[]};var l=s("VU/8")(r,a,!1,function(e){s("mLN5"),s("ZcFV")},"data-v-95e50ff0",null);t.default=l.exports},ZcFV:function(e,t){},mLN5:function(e,t){}});
//# sourceMappingURL=6.914738d07b718cf923f0.js.map